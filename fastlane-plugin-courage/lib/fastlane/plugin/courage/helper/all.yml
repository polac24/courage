
- mutation: 
    name: "Invert Array"
    required:
      return: 
        type: "Array"
        generic: 
          variable: "type"
    actions:
      before_function_return: "\ \ %1 = alloc_stack $Array<@type>                // users: %2, %5, %4\n
\ store #0 to %1 : $*Array<@type>              // id: %2\n
\ //function_ref Sequence.reversed()\n
\ %3 = function_ref @$Ss8SequencePsE8reversedSay7ElementQzGyF : $@convention(method) <τ_0_0 where τ_0_0 : Sequence> (@in_guaranteed τ_0_0) -> @owned Array<τ_0_0.Element> // user: %4\n
\ %4 = apply %3<[@type]>(%1) : $@convention(method) <τ_0_0 where τ_0_0 : Sequence> (@in_guaranteed τ_0_0) -> @owned Array<τ_0_0.Element> // user: %8\n
\ dealloc_stack %1 : $*Array<@type>             // id: %5\n
\ return %4 : $Array<@type>                     // id: %8\n"
      dependencies:
        - file: 
          file: "sil/revesed_array.sil"


- mutation: 
    name: "Empty Array"
    required:
      return: 
        type: "Array"
        generic: 
          variable: "type"
    actions:
      before_function_return: "\ \ %2 = metatype $@thin Array<@type>.Type           // user: %12\n
\ %3 = integer_literal $Builtin.Word, 0           // user: %5\n
\ // function_ref _allocateUninitializedArray<A>(_:)\n
\ %4 = function_ref @$Ss27_allocateUninitializedArrayySayxG_BptBwlF : $@convention(thin) <τ_0_0> (Builtin.Word) -> (@owned Array<τ_0_0>, Builtin.RawPointer) // user: %5\n
\ %5 = apply %4<@type>(%3) : $@convention(thin) <τ_0_0> (Builtin.Word) -> (@owned Array<τ_0_0>, Builtin.RawPointer) // users: %9, %6, %8\n
\ %6 = tuple_extract %5 : $(Array<@type>, Builtin.RawPointer), 0 // users: %12, %7\n
\ retain_value %6 : $Array<@type>                  // id: %7\n
\ %8 = tuple_extract %5 : $(Array<@type>, Builtin.RawPointer), 1 // user: %10\n
\ release_value %5 : $(Array<@type>, Builtin.RawPointer) // id: %9\n
\ %10 = pointer_to_address %8 : $Builtin.RawPointer to [strict] $*@type\n
\ // function_ref Array.init(arrayLiteral:)\n
\ %11 = function_ref @$SSa12arrayLiteralSayxGxd_tcfC : $@convention(method) <τ_0_0> (@owned Array<τ_0_0>, @thin Array<τ_0_0>.Type) -> @owned Array<τ_0_0> // user: %12\n
\ %12 = apply %11<@type>(%6, %2) : $@convention(method) <τ_0_0> (@owned Array<τ_0_0>, @thin Array<τ_0_0>.Type) -> @owned Array<τ_0_0> // user: %13\n
\ return %12 : $Array<@type>                       // id: %13\n"
      dependencies:
        - file: 
          file: "sil/empty_array.sil"

- mutation: 
    name: "Return nil"
    required:
      return:
        type: "Optional"
        generic: 
          variable: "type"
    actions:
      before_function_return: "\ \ %1 = alloc_stack $Optional<@type>                 // users: %6, %5, %4\n
\ %2 = metatype $@thin Optional<@type>.Type         // user: %4\n
\ // function_ref Optional.init(nilLiteral:)\n
\ %3 = function_ref @$SSq10nilLiteralxSgyt_tcfC : $@convention(method) <τ_0_0> (@thin Optional<τ_0_0>.Type) -> @out Optional<τ_0_0> // user: %4\n
\ %4 = apply %3<@type>(%1, %2) : $@convention(method) <τ_0_0> (@thin Optional<τ_0_0>.Type) -> @out Optional<τ_0_0>\n
\ %5 = load [trivial] %2 : $*Optional<@type>        // user: %7\n
\ dealloc_stack %1 : $*Optional<@type>              // id: %6\n
\ return %5 : $Optional<@type>                      // id: %7\n"
      dependencies:
        - file: 
          file: "sil/nil_optional.sil"


- mutation: 
    name: "No operation"
    required:
      return: "()"
    actions:
      before_function_return: "\ \ %1 = tuple ()                                   // user: %2\n
\ return %1 : $()                                 // id: %2\n"

- access_mutation: 
    name: "Set Int to -1"
    required:
      type: "Int"
    actions:
      mutate: "\ \ %1 = metatype $@thin Int.Type                  // user: %4\n
\ %2 = integer_literal $Builtin.Int2048, -1       // user: %4\n
\ // function_ref Int.init(_builtinIntegerLiteral:)\n
\ %3 = function_ref @$SSi22_builtinIntegerLiteralSiBi2048__tcfC : $@convention(method) (Builtin.Int2048, @thin Int.Type) -> Int // user: %4\n
\ %4 = apply %3(%2, %1) : $@convention(method) (Builtin.Int2048, @thin Int.Type) -> Int // user: %6\n
\ %5 = begin_access [modify] [unknown] #0 : $*Int // users: %7, %6\n
\ assign %4 to %5 : $*Int                       // id: %6\n
\ end_access %5 : $*Int                          // id: %7\n"
      offset: 8
    dependencies:
        - file: 
          file: "sil/zero_int.sil"

- access_mutation: 
    name: "Set Int to 0"
    required:
      type: "Int"
    actions:
      mutate: "\ \ %1 = metatype $@thin Int.Type                  // user: %4\n
\ %2 = integer_literal $Builtin.Int2048, 0       // user: %4\n
\ // function_ref Int.init(_builtinIntegerLiteral:)\n
\ %3 = function_ref @$SSi22_builtinIntegerLiteralSiBi2048__tcfC : $@convention(method) (Builtin.Int2048, @thin Int.Type) -> Int // user: %4\n
\ %4 = apply %3(%2, %1) : $@convention(method) (Builtin.Int2048, @thin Int.Type) -> Int // user: %6\n
\ %5 = begin_access [modify] [unknown] #0 : $*Int // users: %7, %6\n
\ assign %4 to %5 : $*Int                       // id: %6\n
\ end_access %5 : $*Int                          // id: %7\n"
      offset: 8
    dependencies:
        - file: 
          file: "sil/zero_int.sil"

- access_mutation: 
    name: "Set String to empty"
    required:
      type: "String"
    actions:
      mutate: "\ \ %1 = string_literal utf8 \"\"                    // user: %6\n
\ %2 = integer_literal $Builtin.Word, 0          // user: %6\n
\ %3 = integer_literal $Builtin.Int1, -1         // user: %6\n
\ %4 = metatype $@thin String.Type               // user: %6\n
\ // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)\n
\ %5 = function_ref @$SSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %6\n
\ %6 = apply %5(%1, %2, %3, %4) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %10\n
\ %7 = begin_access [modify] [unknown] #0 : $*String // users: %11, %12\n
\ assign %6 to %7 : $*String                        // id: %11\n
\ end_access %7 : $*String                          // id: %13\n"
      offset: 14
    dependencies:
        - file: 
          file: "sil/empty_string.sil"
